# Vueé¡¹ç›®ä¼˜åŒ–ä¹‹ - å¯åŠ¨æ—¶é—´ä¼˜åŒ–

### 1ã€speed-measure-webpack-plugin

- ç”¨äºæµ‹è¯•æ‰“åŒ…å„é˜¶æ®µçš„loaderä»¥åŠpluginçš„å·¥ä½œèŠ±è´¹çš„æ—¶é—´ã€‚

  <img src="https://gitee.com/JuntengMa/imgae/raw/master/image-20211028144222857.png" alt="image-20211028144222857" style="zoom:50%; float:left" />

- å®‰è£…

  ```
  npm i speed-measure-webpack-plugin -D
  ```

- ä½¿ç”¨

  Vue-cli 2.x ä¸­å¦‚ä¸‹

  ```
  //webpack.config.js
  const SpeedMeasurePlugin = require("speed-measure-webpack-plugin");
  const smp = new SpeedMeasurePlugin();
  
  const config = {
      //...webpacké…ç½®
  }
  
  module.exports = smp.wrap(config);
  ```

  Vue-cli 3.x ä¸­å¦‚ä¸‹ï¼ˆä¸»è¦åŒºåˆ«æ˜¯åŒ…è£¹ configureWebpack ï¼‰

  ```
  const SpeedMeasurePlugin = require('speed-measure-webpack-plugin')
  const smp = new SpeedMeasurePlugin({
    outputFormat: 'human'
  })
  module.exports = {
    configureWebpack: smp.wrap({
      plugins: []
    })
  }
  ```

  

### 2ã€webpack-bundle-analyzer

- è¿™ä¸ªæ˜¯åˆ†ææ‰“åŒ…åï¼Œå„ä¸ªæ–‡ä»¶çš„å¤§å°ï¼Œç”¨äºåˆ†æ bundle çš„

<img src="https://gitee.com/JuntengMa/imgae/raw/master/image-20211028145219287.png" alt="image-20211028145219287" style="zoom:50%;" />

- å®‰è£…

  ```
  npm i webpack-bundle-analyzer -D
  ```

- ä½¿ç”¨

  ```js
  const BundleAnalyzerPlugin =
    require("webpack-bundle-analyzer").BundleAnalyzerPlugin;
  
  // chainWebpack
  // ç”Ÿäº§ç¯å¢ƒåšçš„ä¸€äº›å¤„ç†
  config.when(process.env.NODE_ENV === "production", (config) => {
    // é…ç½®æ‰“åŒ…åˆ†æå·¥å…· ï¼Œ é…åˆ ` npm run analyze å‘½ä»¤ä½¿ç”¨`
    if (process.env.use_analyzer) {
      config.plugin("webpack-report").use(BundleAnalyzerPlugin);
    }
  }
  ```

- é…ç½®scripts

  // package.json , æ³¨æ„ buildï¼šci éœ€è¦æ”¹ä¸ºé¡¹ç›®å¯¹åº”çš„buildå‘½ä»¤

  ```
   "analyze": "cross-env NODE_ENV=production use_analyzer=true npm run build:ci",
  ```

  

### 3ã€åˆ†æ & è§£å†³æ–¹æ¡ˆ

ä»æ—¶é—´æµ‹è¯•å›¾æ¥çœ‹ï¼Œvue-loaderã€babel-loaderéƒ½æ˜¯ä¸‰åå¤šç§’ï¼Œä»bundleå›¾å¯ä»¥çŸ¥é“é¡µé¢è¾ƒå¤šï¼Œvue-loaderå‹åŠ›è¾ƒå¤§

**è§£å†³æ–¹æ¡ˆï¼šç¼“å­˜** ï¼ˆ[hard-source-webpack-plugin](https://www.npmjs.com/package/hard-source-webpack-plugin)ï¼‰

> `HardSourceWebpackPlugin`æ˜¯ webpack çš„æ’ä»¶ï¼Œä¸ºæ¨¡å—æä¾›ä¸­é—´ç¼“å­˜æ­¥éª¤ã€‚ä¸ºäº†æŸ¥çœ‹ç»“æœï¼Œæ‚¨éœ€è¦ä½¿ç”¨æ­¤æ’ä»¶è¿è¡Œ webpack ä¸¤æ¬¡ï¼šç¬¬ä¸€æ¬¡æ„å»ºå°†èŠ±è´¹æ­£å¸¸çš„æ—¶é—´ã€‚ç¬¬äºŒä¸ªæ„å»ºå°†æ˜¾ç€æ›´å¿«ã€‚

- å®‰è£…

  ```
  npm i -D hard-source-webpack-plugin
  ```

- ä½¿ç”¨

  ```js
   chainWebpack(config) {
   		...
      config.plugin("cache").use(HardSourceWebpackPlugin);
   },
  ```

- æµ‹è¯•&æ•ˆæœ
	æ„å»ºæ—¶é—´ï¼Œç»è¿‡æµ‹è¯• 2 ~ 8 ç§’ä»¥å†…ï¼Œåªèƒ½è¯´ ğŸ˜³ğŸ˜±ğŸ˜†ğŸ¤£ğŸ˜ ohhhhhhhï¼ï¼ï¼ï¼

  | é¦–æ¬¡æ„å»º                                                     | ç¬¬äºŒ&ä¸‰æ¬¡æ„å»º                                                |
  | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | <img src="https://gitee.com/JuntengMa/imgae/raw/master/image-20211028144222857.png" alt="image-20211028144222857" style="zoom:50%; float:left;border-radius: 20px;" /> | <img src="https://gitee.com/JuntengMa/imgae/raw/master/image-20211028151554138.png" alt="image-20211028151554138" style="zoom: 47%; border-radius: 20px;" /> |


- å…³äºç¼“å­˜çš„ä½ç½®ï¼š

  <img src="https://gitee.com/JuntengMa/imgae/raw/master/image-20211028152230284.png" alt="image-20211028152230284" style="zoom:50%;border-radius:20px;float:left" />
  
  

